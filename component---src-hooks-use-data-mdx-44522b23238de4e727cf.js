(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{oNTL:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return l}));n("1c7q"),n("abGl"),n("gZHo"),n("Fdmb"),n("Ir+3"),n("2mQt");var a=n("/FXl"),r=n("TjRS");n("aD51");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var c={};void 0!==c&&c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/hooks/useData.mdx"}});var b={_frontmatter:c},i=r.a;function l(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(i,o({},b,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",null,"useData"),Object(a.b)("h2",{id:"description"},"Description"),Object(a.b)("p",null,"This hook returns an ",Object(a.b)("inlineCode",{parentName:"p"},"execute")," function that can be used to query the Google Analytics Core Reporting API for data and get back the results."),Object(a.b)("p",null,"You can use the raw data to build your own charts using a charting library of your choosing."),Object(a.b)("h2",{id:"usage"},"Usage"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-jsx"}),"import { useData } from 'react-use-analytics-api';\n")),Object(a.b)("p",null,"In your function component:"),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-jsx"}),"const query = {\n  metrics: 'ga:sessions',\n  dimensions: 'ga:date',\n  'start-date': '28daysAgo',\n  'end-date': 'today',\n  ids: viewId,\n};\nconst execute = useData(\n  gapi,\n  query,\n  response => console.log('Data query response:', response),\n  response => console.error('Data query error:', response)\n);\nReact.useEffect(() => {\n  execute();\n}, [execute]);\n")),Object(a.b)("p",null,"Provide the hook with ",Object(a.b)("a",o({parentName:"p"},{href:"/react-use-analytics-api/useAnalyticsApi"}),Object(a.b)("inlineCode",{parentName:"a"},"gapi")),", your ",Object(a.b)("inlineCode",{parentName:"p"},"query"),", and two callbacks: ",Object(a.b)("inlineCode",{parentName:"p"},"onSuccess")," and ",Object(a.b)("inlineCode",{parentName:"p"},"onError"),". "),Object(a.b)("p",null,"Call ",Object(a.b)("inlineCode",{parentName:"p"},"execute")," to run the query."),Object(a.b)("h2",{id:"signature"},"Signature"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"useData = (gapi?: GoogleAnalyticsEmbedAPI, query: Query, onSuccess?: (response: any) => void, onError?: (response: any) => void): (() => void)")),Object(a.b)("h3",{id:"arguments"},"Arguments"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",o({parentName:"tr"},{align:null}),"Argument"),Object(a.b)("th",o({parentName:"tr"},{align:null}),"Type"),Object(a.b)("th",o({parentName:"tr"},{align:null}),"Description"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",o({parentName:"tr"},{align:null}),"gapi"),Object(a.b)("td",o({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"GoogleAnalyticsEmbedAPI")," ","|"," ",Object(a.b)("inlineCode",{parentName:"td"},"undefined")),Object(a.b)("td",o({parentName:"tr"},{align:null}),"The ",Object(a.b)("a",o({parentName:"td"},{href:"/react-use-analytics-api/useAnalyticsApi"}),"Google Analytics Embed API"),". When ",Object(a.b)("inlineCode",{parentName:"td"},"undefined"),", calling ",Object(a.b)("inlineCode",{parentName:"td"},"useData")," does nothing.")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",o({parentName:"tr"},{align:null}),"query"),Object(a.b)("td",o({parentName:"tr"},{align:null}),Object(a.b)("a",o({parentName:"td"},{href:"https://developers.google.com/analytics/devguides/reporting/core/v3/reference#q_summary"}),Object(a.b)("inlineCode",{parentName:"a"},"Query"))),Object(a.b)("td",o({parentName:"tr"},{align:null}),"The data ",Object(a.b)("a",o({parentName:"td"},{href:"https://developers.google.com/analytics/devguides/reporting/core/v3/reference#q_summary"}),"query")," for the Google Analytics Core Reporting API.")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",o({parentName:"tr"},{align:null}),"onSuccess"),Object(a.b)("td",o({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"(response) => void")),Object(a.b)("td",o({parentName:"tr"},{align:null}),"Fired when the query has successfully completed. The ",Object(a.b)("inlineCode",{parentName:"td"},"response")," argument will contain the query results.")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",o({parentName:"tr"},{align:null}),"onError"),Object(a.b)("td",o({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"(response) => void")),Object(a.b)("td",o({parentName:"tr"},{align:null}),"Fired when an error occurs during the query process. If you want to get the error message from the response object it will be at ",Object(a.b)("inlineCode",{parentName:"td"},"response.error.message"),".")))),Object(a.b)("h3",{id:"return"},"Return"),Object(a.b)("p",null,"The hook returns a function, ",Object(a.b)("inlineCode",{parentName:"p"},"execute"),"."),Object(a.b)("pre",null,Object(a.b)("code",o({parentName:"pre"},{className:"language-jsx"}),"execute() => void\n")),Object(a.b)("p",null,"When ",Object(a.b)("inlineCode",{parentName:"p"},"gapi")," is not ",Object(a.b)("inlineCode",{parentName:"p"},"undefined"),", this function executes the ",Object(a.b)("a",o({parentName:"p"},{href:"https://developers.google.com/analytics/devguides/reporting/core/v3/reference#q_summary"}),"query")," to the Google Analytics Core Reporting API using ",Object(a.b)("a",o({parentName:"p"},{href:"https://developers.google.com/analytics/devguides/reporting/embed/v1/component-reference#data"}),Object(a.b)("inlineCode",{parentName:"a"},"gapi.analytics.report.Data")),"."),Object(a.b)("p",null,"After calling ",Object(a.b)("inlineCode",{parentName:"p"},"execute"),", either the ",Object(a.b)("inlineCode",{parentName:"p"},"onSuccess")," or ",Object(a.b)("inlineCode",{parentName:"p"},"onError")," callback will be called."))}l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/hooks/useData.mdx"}}),l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-hooks-use-data-mdx-44522b23238de4e727cf.js.map